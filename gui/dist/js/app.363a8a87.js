(function(e){function t(t){for(var s,r,l=t[0],o=t[1],c=t[2],u=0,p=[];u<l.length;u++)r=l[u],n[r]&&p.push(n[r][0]),n[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,l=1;l<a.length;l++){var o=a[l];0!==n[o]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=o;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("c21b"),n=a.n(s);n.a},1:function(e,t){},"1bf0":function(e,t,a){},2:function(e,t){},3:function(e,t){},4:function(e,t){},4268:function(e,t,a){"use strict";var s=a("1bf0"),n=a.n(s);n.a},4366:function(e,t,a){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"container"}},[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-vertical is-parent"},[a("div",{staticClass:"tile is-child card",staticStyle:{"flex-grow":"0"}},[e._m(0),a("div",{staticClass:"card-content"},[a("b-field",{staticClass:"file"},[a("b-upload",{staticStyle:{width:"100%"},on:{input:e.upload_file}},[a("a",{staticClass:"button is-fullwidth"},[a("b-icon",{attrs:{icon:"upload"}}),a("span",[e._v("Upload")])],1)])],1),a("div",{staticClass:"field"},[a("a",{staticClass:"button is-fullwidth",on:{click:function(t){e.isComponentModalActive=!0}}},[a("b-icon",{attrs:{icon:"download"}}),a("span",[e._v("Download")])],1)]),a("b-modal",{attrs:{active:e.isComponentModalActive,"has-modal-card":""},on:{"update:active":function(t){e.isComponentModalActive=t}}},[a("file-download",{attrs:{peers:e.routing_table}})],1)],1)]),a("div",{staticClass:"tile is-child card",staticStyle:{"flex-grow":"0"}},[e._m(1),a("div",{staticClass:"card-content"},[a("div",{staticStyle:{overflow:"scroll","margin-bottom":"20px",height:"250px"}},[a("ul",e._l(e.searches,function(t,s){return a("li",{key:s,staticStyle:{"border-bottom":"1px solid #EEEEEE"}},[a("div",{staticClass:"level",staticStyle:{margin:"0"}},[a("div",{staticClass:"level-left"},[e._v("\n                      "+e._s(t.Keywords)+"\n                    ")]),a("div",{staticClass:"level-right has-text-weight-bold"},[e._v("\n                      "+e._s(t.FileName)+"\n                    ")])]),a("a",{on:{click:function(){return e.downloadFromSearch(t.MetaHash)}}},[a("span",{staticClass:"icon is-small mdi mdi-download"}),a("span",[e._v(e._s(t.MetaHash))])])])})),a("b-modal",{attrs:{active:e.searchDownloadModal,"has-modal-card":""},on:{"update:active":function(t){e.searchDownloadModal=t}}},[a("file-download-search",{attrs:{hashvalue:e.selected_metahash_search}})],1)],1),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control",staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search_keywords,expression:"search_keywords"}],staticClass:"input",attrs:{type:"text",placeholder:"foo,bar"},domProps:{value:e.search_keywords},on:{input:function(t){t.target.composing||(e.search_keywords=t.target.value)}}})]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-primary",on:{click:e.new_search}},[e._v("\n                  Search\n                ")])])])])])]),a("div",{staticClass:"tile is-vertical is-7 is-parent"},[a("div",{staticClass:"tile is-child card"},[a("header",{staticClass:"card-header"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticStyle:{width:"20px"}}),a("b-dropdown",[a("button",{staticClass:"button",attrs:{slot:"trigger"},slot:"trigger"},[a("i",{staticClass:"fas fa-plus"}),a("b-icon",{attrs:{icon:"menu-down"}})],1),e._l(e.routing_table,function(t){return e.opened_private_channels.includes(t)?e._e():a("b-dropdown-item",{key:t,on:{click:function(a){e.open_private_channel(t)}}},[e._v("\n                    "+e._s(t)+"\n                  ")])})],2),a("p",{staticClass:"card-header-title level-item"},[e._v("\n                  Messages\n                ")])],1)])]),a("div",{staticClass:"card-content"},[a("b-tabs",{attrs:{type:"is-toggle",animated:!1},on:{input:function(t){return e.opened_channel=t}},model:{value:e.opened_channel,callback:function(t){e.opened_channel=t},expression:"opened_channel"}},[a("b-tab-item",{attrs:{icon:"users",iconPack:"fa",label:"General"}},[a("messages",{attrs:{messages:e.messages},on:{"submit-message":function(t){e.add_message(t)}}})],1),e._l(e.opened_private_channels,function(t){return a("b-tab-item",{key:t,attrs:{icon:"user",iconPack:"fa",label:t}},[a("messages",{attrs:{messages:e.private_channels[t]},on:{"submit-message":function(a){e.add_private_message(t,a)}}},[e._v("\n                  >\n                ")])],1)})],2)],1)])]),a("div",{staticClass:"tile is-vertical is-parent"},[a("div",{staticClass:"tile is-child card",staticStyle:{"flex-grow":"0"}},[a("div",{staticClass:"navbar-item"},[a("a",{staticClass:"button",attrs:{size:"sm"},on:{click:e.refresh}},[a("i",{staticClass:"fas fa-sync"})]),a("span",{staticClass:"navbar-item"},[e._v("Last refresh at "+e._s(e.time_last_update.toLocaleTimeString()))])])]),a("div",{staticClass:"tile is-child card",staticStyle:{"flex-grow":"0"}},[a("div",{staticClass:"card-content"},[e._v("\n            Connected to "),a("strong",[e._v(" "+e._s(e.server.name)+" ")]),e._v(" \n            at address "),a("strong",[e._v(" "+e._s(e.server.address)+" ")])])]),a("div",{staticClass:"card is-child tile",staticStyle:{"flex-grow":"0"}},[e._m(2),a("div",{staticClass:"card-content"},[a("b-taglist",e._l(e.peers,function(t){return a("b-tag",{key:t},[e._v(e._s(t))])})),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control",staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.new_peer_address,expression:"new_peer_address"}],staticClass:"input",attrs:{type:"text",placeholder:"Address"},domProps:{value:e.new_peer_address},on:{input:function(t){t.target.composing||(e.new_peer_address=t.target.value)}}})]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-primary",on:{click:e.add_peer}},[e._v("\n                  Add peer\n                ")])])])],1)])])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[e._v("\n              File\n            ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[e._v("\n              File Search\n            ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[e._v("\n              Peers\n            ")])])}],r=(a("55dd"),a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("6762"),a("2fdb"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{overflow:"scroll","margin-bottom":"20px",height:"500px"}},[a("ul",e._l(e.messages,function(t,s){return a("li",{key:s,staticStyle:{padding:"10px 40px 10px 40px","border-bottom":"1px solid #EEEEEE"}},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-primary"}},[e._v(e._s(t.Origin))]),a("b-tag",{attrs:{type:"is-light"}},[e._v(e._s(t.ID))])],1)],1),a("div",{staticClass:"level-right"},[a("span",{staticClass:"d-flex justify-content-end"},[e._v("\n              "+e._s(t.Text)+"\n            ")])])])])}))]),a("div",{staticClass:"field has-addons"},[a("div",{staticClass:"control",staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.new_message,expression:"new_message"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter message"},domProps:{value:e.new_message},on:{input:function(t){t.target.composing||(e.new_message=t.target.value)}}})]),a("div",{staticClass:"control"},[a("a",{staticClass:"button is-primary",on:{click:e.add_message}},[e._v("\n        Send\n      ")])])])])}),l=[],o={components:{},props:["messages"],data:function(){return{new_message:""}},methods:{add_message:function(e){""!=this.new_message&&(this.$emit("submit-message",this.new_message),this.new_message="")},refresh:function(){this.load_peers(),this.get_new_messages(),this.time_last_update=new Date(Date.now())}}},c=o,d=(a("5932"),a("2877")),u=Object(d["a"])(c,r,l,!1,null,null,null);u.options.__file="Messages.vue";var p=u.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{label:"From Peer"}},[a("b-select",{attrs:{placeholder:"Select a peer",expanded:"",required:""},model:{value:e.selectedpeer,callback:function(t){e.selectedpeer=t},expression:"selectedpeer"}},e._l(e.peers,function(t){return a("option",{key:t,attrs:{required:""},domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n          ")])}))],1),a("b-field",{attrs:{label:"Filename"}},[a("b-input",{attrs:{placeholder:"Downloaded file name",required:""},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),a("b-field",{attrs:{label:"Metahash"}},[a("b-input",{attrs:{placeholder:"Hash of the metafile",maxlength:"64",required:""},model:{value:e.hashvalue,callback:function(t){e.hashvalue=t},expression:"hashvalue"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.$parent.close()}}},[e._v("Close")]),a("a",{staticClass:"button is-primary",on:{click:e.upload}},[e._v("Download")])])])},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("Download")])])}],v=a("30dc"),_={props:["email","password","peers"],data:function(){return{hashvalue:"",filename:"",selectedpeer:""}},methods:{upload:function(e){if(""!=this.selectedpeer&&""!=this.filename&&""!=this.hashvalue){var t={Peer:this.selectedpeer,Filename:this.filename,HashValue:this.hashvalue};v.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/download",body:JSON.stringify(t)},function(e,t,a){}),this.$parent.close()}}}},m=_,b=(a("4268"),Object(d["a"])(m,h,f,!1,null,null,null));b.options.__file="FileDownload.vue";var g=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[e._m(0),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{label:"Filename"}},[a("b-input",{attrs:{placeholder:"Downloaded file name",required:""},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(t){e.$parent.close()}}},[e._v("Close")]),a("a",{staticClass:"button is-primary",on:{click:e.download}},[e._v("Download")])])])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[e._v("Download from Search")])])}],C=a("30dc"),S={props:["hashvalue"],data:function(){return{hashvalue:"",filename:""}},methods:{download:function(e){if(""!=this.filename&&""!=this.hashvalue){var t={Peer:"",Filename:this.filename,HashValue:this.hashvalue};C.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/download",body:JSON.stringify(t)},function(e,t,a){}),this.$parent.close()}}}},x=S,k=(a("a128"),Object(d["a"])(x,y,w,!1,null,null,null));k.options.__file="FileDownloadSearch.vue";var O=k.exports,D=a("30dc"),E={name:"app",components:{Messages:p,FileDownload:g,FileDownloadSearch:O},data:function(){return{server:{address:"Unknown",name:"Unknown"},peers_dns:{},peers:[],routing_table:["d","a","b","c"],new_peer_address:"",new_message:"",messages:[],time_last_update:new Date(Date.now()),opened_private_channels:[],private_channels:{},opened_channel:0,search_keywords:"",selected_metahash_search:"",searches:[]}},methods:{open_private_channel:function(e){this.opened_private_channels.includes(e)||(this.opened_private_channels.push(e),this.$nextTick(function(){this.opened_channel=this.opened_private_channels.length}),e in this.private_channels||(this.private_channels[e]=[]))},load_identity:function(){var e=this;D("http://127.0.0.1:8080/id",function(t,a,s){var n=JSON.parse(s);e.server.name=n["Name"],e.server.address=n["Address"]})},load_peers:function(){var e=this;D("http://127.0.0.1:8080/node",function(t,a,s){var n=JSON.parse(s);e.peers=[];var i=!0,r=!1,l=void 0;try{for(var o,c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var d=o.value;e.peers.push(d)}}catch(e){r=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw l}}})},get_new_messages:function(){var e=this;D("http://127.0.0.1:8080/message",function(t,a,s){var n=JSON.parse(s),i=!0,r=!1,l=void 0;try{for(var o,c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var d=o.value;e.messages.push(d.Rumor)}}catch(e){r=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw l}}})},get_search_results:function(){var e=this;D("http://127.0.0.1:8080/searchresults",function(t,a,s){var n=JSON.parse(s),i=!0,r=!1,l=void 0;try{for(var o,c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var d=o.value;e.searches.push(d)}}catch(e){r=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw l}}})},get_new_private_messages:function(){var e=this;D("http://127.0.0.1:8080/private",function(t,a,s){var n=JSON.parse(s),i=!0,r=!1,l=void 0;try{for(var o,c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var d=o.value,u=d.Origin;u==e.server.name&&(u=d.Destination),u in e.private_channels?e.private_channels[u].push(d):e.private_channels[u]=[d]}}catch(e){r=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw l}}})},upload_file:function(e){D.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/upload",body:JSON.stringify(e.name)},function(e,t,a){})},get_routing_table:function(){var e=this;D("http://127.0.0.1:8080/routingtable",function(t,a,s){var n=JSON.parse(s);e.routing_table=[];var i=!0,r=!1,l=void 0;try{for(var o,c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var d=o.value;e.routing_table.push(d)}}catch(e){r=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw l}}e.routing_table.sort()})},downloadFromSearch:function(e){this.searchDownloadModal=!0,this.selected_metahash_search=e},add_peer:function(e){""!=this.new_peer_address&&(D.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/node",body:JSON.stringify(this.new_peer_address)},function(e,t,a){}),this.new_peer_address="")},new_search:function(e){""!=this.search_keywords&&(D.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/search",body:JSON.stringify(this.search_keywords)},function(e,t,a){}),this.new_peer_address="")},add_message:function(e){D.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/message",body:JSON.stringify(e)},function(e,t,a){})},add_private_message:function(e,t){D.post({headers:{"content-type":"application/json"},url:"http://127.0.0.1:8080/private",body:JSON.stringify({Content:t,To:e})},function(e,t,a){})},refresh:function(){this.load_peers(),this.get_new_messages(),this.get_new_private_messages(),this.get_routing_table(),this.get_search_results(),this.time_last_update=new Date(Date.now())}},computed:{peers_map:function(){var e={},t=!0,a=!1,s=void 0;try{for(var n,i=this.peers[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var r=n.value;r in this.peers_dns?e[r]=this.peers_dns[r]:e[r]="Unknown"}}catch(e){a=!0,s=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw s}}return e}},mounted:function(){var e=this;this.load_identity(),this.refresh(),setInterval(function(){e.refresh()},1e3)}},j=E,N=(a("034f"),Object(d["a"])(j,n,i,!1,null,null,null));N.options.__file="App.vue";var M=N.exports,P=a("8a03"),$=a.n(P);a("5abe");s["default"].config.productionTip=!1,s["default"].use($.a),new s["default"]({render:function(e){return e(M)}}).$mount("#app")},5932:function(e,t,a){"use strict";var s=a("4366"),n=a.n(s);n.a},a128:function(e,t,a){"use strict";var s=a("f6ee"),n=a.n(s);n.a},c21b:function(e,t,a){},f6ee:function(e,t,a){}});
//# sourceMappingURL=app.363a8a87.js.map